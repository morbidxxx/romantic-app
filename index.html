<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíï –î–ª—è –º–æ–µ–π –ª—é–±–∏–º–æ–π</title>
<!-- React –∏ Babel –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
<meta name="theme-color" content="#ec4899">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Love App">
<!-- –ò–∫–æ–Ω–∫–∏ -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíù</text></svg>">
<style>
/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ª–µ–ø–µ—Å—Ç–∫–æ–≤ */
@keyframes fall {
0% {
transform: translateY(-100vh) rotate(0deg);
opacity: 0.8;
}
100% {
transform: translateY(100vh) rotate(360deg);
opacity: 0;
}
}
/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Å–µ—Ä–¥–µ—á–µ–∫ */
@keyframes heartFloat {
0% {
transform: translateY(0) scale(1);
opacity: 1;
}
100% {
transform: translateY(-50px) scale(0.8);
opacity: 0;
}
}
/* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
.smooth-transition {
transition: all 0.3s ease;
}
/* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
.gradient-button {
background: linear-gradient(135deg, #ec4899, #8b5cf6);
transition: all 0.3s ease;
}
.gradient-button:hover {
transform: translateY(-2px);
box-shadow: 0 10px 20px rgba(236, 72, 153, 0.3);
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */
.modal-backdrop {
backdrop-filter: blur(10px);
-webkit-backdrop-filter: blur(10px);
}
/* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ */
.custom-scrollbar::-webkit-scrollbar {
width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
background: #f1f1f1;
border-radius: 10px;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
background: #ec4899;
border-radius: 10px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
background: #db2777;
}
/* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
.no-select {
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
/* –°–∫—Ä—ã—Ç–∏–µ –ø–æ–ª–æ—Å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
.hide-scrollbar {
-ms-overflow-style: none;
scrollbar-width: none;
}
.hide-scrollbar::-webkit-scrollbar {
display: none;
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ç—Ä—è—Å–∫–∏ */
@keyframes shake {
0%, 100% { transform: translateX(0); }
25% { transform: translateX(-5px); }
75% { transform: translateX(5px); }
}
.animate-shake {
animation: shake 0.5s ease-in-out;
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –ø—É–ª—å—Å–∞—Ü–∏–∏ */
@keyframes pulse {
0%, 100% { opacity: 1; }
50% { opacity: 0.5; }
}
.animate-pulse {
animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ */
html, body {
overflow-x: hidden;
position: relative;
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã iPhone */
.safe-area-inset {
padding-bottom: env(safe-area-inset-bottom);
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞ */
.line-clamp-2 {
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.photo-preview {
aspect-ratio: 1;
object-fit: cover;
}
/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π */
.action-button:hover {
transform: scale(1.05);
}
</style>
</head>
<body>
<div id="root"></div>
<script type="module">
// –ò–º–ø–æ—Ä—Ç Firebase –º–æ–¥—É–ª–µ–π
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import {
getFirestore,
collection,
doc,
addDoc,
setDoc,
getDoc,
getDocs,
updateDoc,
deleteDoc,
onSnapshot,
query,
orderBy,
serverTimestamp
} 
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
 const firebaseConfig = {
    apiKey: "AIzaSyDTC5bxFgoZwMGY57VmGLc7ZpMx-5SgiHs",
    authDomain: "loveapp-1643d.firebaseapp.com",
    projectId: "loveapp-1643d",
    storageBucket: "loveapp-1643d.firebasestorage.app",
    messagingSenderId: "346049985803",
    appId: "1:346049985803:web:4e5ba419432c6d40f2760e"
  };
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
// –î–µ–ª–∞–µ–º Firebase –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è React
window.firebaseDB = db;
window.firebaseUtils = {
collection,
doc,
addDoc,
setDoc,
getDoc,
getDocs,
updateDoc,
deleteDoc,
onSnapshot,
query,
orderBy,
serverTimestamp
};
window.firebaseReady = true;
window.dispatchEvent(new Event('firebaseReady'));
console.log("‚úÖ Firebase —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!");
</script>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;
// –•—É–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Firebase
const useFirebaseReady = () => {
const [ready, setReady] = useState(window.firebaseReady || false);
useEffect(() => {
if (window.firebaseReady) {
setReady(true);
} else {
const handler = () => setReady(true);
window.addEventListener('firebaseReady', handler);
return () => window.removeEventListener('firebaseReady', handler);
}
}, []);
return ready;
};
// –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º Firebase (–∑–∞–º–µ–Ω–∞ localStorage)
const useFirebaseDoc = (collectionName, docId, initialData = {}) => {
    const [data, setData] = useState(initialData);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);
    const firebaseReady = useFirebaseReady();
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    useEffect(() => {
        if (!firebaseReady) return;
        
        const { doc, onSnapshot, setDoc } = window.firebaseUtils;
        const docRef = doc(window.firebaseDB, collectionName, docId);
        
        const unsubscribe = onSnapshot(docRef,
            (snapshot) => {
                if (snapshot.exists()) {
                    setData(snapshot.data());
                } else {
                    // –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
                    // –í–ê–ñ–ù–û: —Å–Ω–∞—á–∞–ª–∞ initialData, –ø–æ—Ç–æ–º –¥–∞—Ç—ã, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –∏—Ö null
                    const initialDocData = {
                        ...initialData,
                        firstVisitDate: new Date().toDateString(),
                        lastVisitDate: new Date().toDateString()
                    };
                    setDoc(docRef, initialDocData);
                    setData(initialDocData);
                }
                setLoading(false);
            },
            (err) => {
                console.error('Firebase error:', err);
                setError(err);
                setLoading(false);
            }
        );
        
        return () => unsubscribe();
    }, [firebaseReady, collectionName, docId]);
    
    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    const updateData = useCallback(async (newData) => {
        if (!firebaseReady) return;
        try {
            const { doc, updateDoc, setDoc, getDoc } = window.firebaseUtils;
            const docRef = doc(window.firebaseDB, collectionName, docId);
            
            const snapshot = await getDoc(docRef);
            if (snapshot.exists()) {
                await updateDoc(docRef, newData);
            } else {
                // –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—ë–º –µ–≥–æ
                const fullData = {
                    ...initialData,
                    ...newData,
                    firstVisitDate: new Date().toDateString(),
                    lastVisitDate: new Date().toDateString()
                };
                await setDoc(docRef, fullData);
            }
        } catch (err) {
            console.error('Update error:', err);
            setError(err);
        }
    }, [firebaseReady, collectionName, docId]);
    
    return { data, loading, error, updateData };
};
// –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π (—Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ñ–æ—Ç–æ –∏ —Ç.–¥.)
const useFirebaseCollection = (collectionName) => {
const [items, setItems] = useState([]);
const [loading, setLoading] = useState(true);
const firebaseReady = useFirebaseReady();
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é
useEffect(() => {
if (!firebaseReady) return;
const { collection, query, orderBy, onSnapshot } = window.firebaseUtils;
const q = query(
collection(window.firebaseDB, collectionName),
orderBy('createdAt', 'desc')
);
const unsubscribe = onSnapshot(q, (snapshot) => {
const newItems = snapshot.docs.map(doc => ({
id: doc.id,
...doc.data()
}));
setItems(newItems);
setLoading(false);
});
return () => unsubscribe();
}, [firebaseReady, collectionName]);
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
const addItem = useCallback(async (item) => {
if (!firebaseReady) return;
const { collection, addDoc } = window.firebaseUtils;
await addDoc(collection(window.firebaseDB, collectionName), {
...item,
createdAt: Date.now()
});
}, [firebaseReady, collectionName]);
// –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
const removeItem = useCallback(async (itemId) => {
if (!firebaseReady) return;
const { doc, deleteDoc } = window.firebaseUtils;
await deleteDoc(doc(window.firebaseDB, collectionName, itemId));
}, [firebaseReady, collectionName]);
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
const updateItem = useCallback(async (itemId, newData) => {
if (!firebaseReady) return;
const { doc, updateDoc } = window.firebaseUtils;
await updateDoc(doc(window.firebaseDB, collectionName, itemId), newData);
}, [firebaseReady, collectionName]);
return { items, loading, addItem, removeItem, updateItem };
};
// ============================================
// –ö–û–ú–ü–û–ù–ï–ù–¢ –ì–ê–õ–ï–†–ï–ò
// ============================================
const GalleryModal = ({ images, currentIndex, setCurrentIndex, onClose, updateStats, userStats }) => {
const [localImages, setLocalImages] = useState([]);
const [allImages, setAllImages] = useState([]);
const [showUploadOption, setShowUploadOption] = useState(false);
const [selectedImageIndex, setSelectedImageIndex] = useState(currentIndex);
const [showFullImage, setShowFullImage] = useState(false);
const fileInputRef = useRef(null);
// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ–æ—Ç–æ
useEffect(() => {
const savedPhotos = localStorage.getItem('user_gallery_photos');
if (savedPhotos) {
setLocalImages(JSON.parse(savedPhotos));
}
}, []);
// –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
useEffect(() => {
setAllImages([...images, ...localImages]);
}, [images, localImages]);
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
const handleFileUpload = (event) => {
const files = Array.from(event.target.files);
files.forEach(file => {
if (file.type.startsWith('image/') && file.size <= 10 * 1024 * 1024) {
const reader = new FileReader();
reader.onload = (e) => {
const newPhoto = {
id: `user_${Date.now()}_${Math.random()}`,
url: e.target.result,
title: file.name.replace(/\.[^/.]+$/, ""),
isUserPhoto: true,
uploadedAt: new Date().toISOString()
};
setLocalImages(prev => {
const updated = [...prev, newPhoto];
localStorage.setItem('user_gallery_photos', JSON.stringify(updated));
return updated;
});
// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
if (updateStats && userStats) {
updateStats({ photosViewed: userStats.photosViewed + 1 });
}
};
reader.readAsDataURL(file);
} else {
alert('–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ –Ω–µ –ø—Ä–µ–≤—ã—à–∞—Ç—å 10MB');
}
});
event.target.value = '';
setShowUploadOption(false);
};
// –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–æ—Ç–æ
const deleteUserPhoto = (photoId) => {
if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏?')) {
setLocalImages(prev => {
const updated = prev.filter(p => p.id !== photoId);
localStorage.setItem('user_gallery_photos', JSON.stringify(updated));
return updated;
});
}
};
// –ù–∞–≤–∏–≥–∞—Ü–∏—è
const goToNext = () => {
setSelectedImageIndex(prev => (prev + 1) % allImages.length);
};
const goToPrev = () => {
setSelectedImageIndex(prev => (prev - 1 + allImages.length) % allImages.length);
};
// –°–≤–∞–π–ø –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
const [touchStart, setTouchStart] = useState(null);
const [touchEnd, setTouchEnd] = useState(null);
const minSwipeDistance = 50;
const onTouchStart = (e) => {
setTouchEnd(null);
setTouchStart(e.targetTouches[0].clientX);
};
const onTouchMove = (e) => {
setTouchEnd(e.targetTouches[0].clientX);
};
const onTouchEnd = () => {
if (!touchStart || !touchEnd) return;
const distance = touchStart - touchEnd;
const isLeftSwipe = distance > minSwipeDistance;
const isRightSwipe = distance < -minSwipeDistance;
if (isLeftSwipe) {
goToNext();
} else if (isRightSwipe) {
goToPrev();
}
};
return (
<div className="fixed inset-0 bg-black z-50 flex flex-col">
{/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
<div className="bg-black/80 p-4 flex justify-between items-center safe-area-inset">
<div className="text-white">
<h2 className="font-bold">üì∏ –ì–∞–ª–µ—Ä–µ—è</h2>
<p className="text-sm text-gray-400">
{selectedImageIndex + 1} / {allImages.length}
</p>
</div>
<div className="flex gap-3">
<button
onClick={() => setShowUploadOption(true)}
className="bg-pink-500 text-white px-4 py-2 rounded-full text-sm font-medium"
>
+ –î–æ–±–∞–≤–∏—Ç—å
</button>
<button
onClick={onClose}
className="text-white text-2xl p-2"
>
‚úï
</button>
</div>
</div>
{/* –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */}
{allImages.length > 0 && (
<div
className="flex-1 flex items-center justify-center relative"
onTouchStart={onTouchStart}
onTouchMove={onTouchMove}
onTouchEnd={onTouchEnd}
>
<img
src={allImages[selectedImageIndex]?.url}
alt={allImages[selectedImageIndex]?.title}
className="max-w-full max-h-full object-contain"
onClick={() => setShowFullImage(true)}
onError={(e) => {
e.target.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23333" width="100" height="100"/><text x="50" y="55" text-anchor="middle" font-size="20" fill="%23fff">üíï</text></svg>';
}}
/>
{/* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */}
<button
onClick={goToPrev}
className="absolute left-2 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur text-white p-3 rounded-full"
>
‚Üê
</button>
<button
onClick={goToNext}
className="absolute right-2 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur text-white p-3 rounded-full"
>
‚Üí
</button>
{/* –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–æ—Ç–æ */}
{allImages[selectedImageIndex]?.isUserPhoto && (
<button
onClick={() => deleteUserPhoto(allImages[selectedImageIndex].id)}
className="absolute top-4 right-4 bg-red-500 text-white p-2 rounded-full"
>
üóëÔ∏è
</button>
)}
</div>
)}
{/* –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ */}
{allImages.length > 0 && (
<div className="bg-black/80 p-4 text-center">
<p className="text-white font-medium">
{allImages[selectedImageIndex]?.title}
</p>
{allImages[selectedImageIndex]?.isUserPhoto && (
<span className="text-pink-400 text-xs">–í–∞—à–µ —Ñ–æ—Ç–æ</span>
)}
</div>
)}
{/* –ú–∏–Ω–∏–∞—Ç—é—Ä—ã */}
<div className="bg-black/90 p-3 safe-area-inset">
<div className="flex gap-2 overflow-x-auto hide-scrollbar">
{allImages.map((image, index) => (
<button
key={image.id || index}
onClick={() => setSelectedImageIndex(index)}
className={`flex-shrink-0 w-16 h-16 rounded-xl overflow-hidden border-2 transition-all ${
selectedImageIndex === index
? 'border-pink-500 scale-105'
: 'border-transparent opacity-60'
}`}
>
<img
src={image.url}
alt=""
className="w-full h-full object-cover"
onError={(e) => {
e.target.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23333" width="100" height="100"/><text x="50" y="55" text-anchor="middle" font-size="30">üíï</text></svg>';
}}
/>
</button>
))}
</div>
</div>
{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ */}
{showUploadOption && (
<div className="absolute inset-0 bg-black/80 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl p-6 w-full max-w-sm">
<h3 className="text-xl font-bold text-gray-800 mb-4 text-center">
üì∑ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
</h3>
<input
ref={fileInputRef}
type="file"
accept="image/*"
multiple
onChange={handleFileUpload}
className="hidden"
/>
<button
onClick={() => fileInputRef.current?.click()}
className="w-full mb-3 p-4 border-2 border-dashed border-pink-300 rounded-2xl text-center hover:bg-pink-50 transition-colors"
>
<div className="text-4xl mb-2">üì∏</div>
<p className="text-gray-600">–í—ã–±—Ä–∞—Ç—å –∏–∑ –≥–∞–ª–µ—Ä–µ–∏</p>
<p className="text-xs text-gray-400">–î–æ 10MB –Ω–∞ —Ñ–∞–π–ª</p>
</button>
<button
onClick={() => setShowUploadOption(false)}
className="w-full py-3 bg-gray-100 rounded-2xl text-gray-600 font-medium"
>
–û—Ç–º–µ–Ω–∞
</button>
</div>
</div>
)}
{/* –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä */}
{showFullImage && allImages[selectedImageIndex] && (
<div
className="absolute inset-0 bg-black flex items-center justify-center"
onClick={() => setShowFullImage(false)}
>
<img
src={allImages[selectedImageIndex].url}
alt=""
className="max-w-full max-h-full object-contain"
/>
<button
onClick={() => setShowFullImage(false)}
className="absolute top-4 right-4 text-white text-3xl"
>
‚úï
</button>
</div>
)}
</div>
);
};
// ============================================
// –û–°–ù–û–í–ù–û–ô –ö–û–ú–ü–û–ù–ï–ù–¢ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
// ============================================
const RomanticMobileApp = () => {
// === –°–æ—Å—Ç–æ—è–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ===
const [isAuthenticated, setIsAuthenticated] = useState(false);
const [showPasswordModal, setShowPasswordModal] = useState(true);
const [passwordInput, setPasswordInput] = useState('');
const [passwordError, setPasswordError] = useState('');
const [attemptCount, setAttemptCount] = useState(0);
const SECRET_PASSWORD = 'love2020';
// === –°–æ—Å—Ç–æ—è–Ω–∏—è UI ===
const [currentImageIndex, setCurrentImageIndex] = useState(0);
const [currentLoveMessage, setCurrentLoveMessage] = useState(null);
const [selectedCategory, setSelectedCategory] = useState('all');
const [showStoryModal, setShowStoryModal] = useState(false);
const [showGalleryModal, setShowGalleryModal] = useState(false);
const [showCalendarModal, setShowCalendarModal] = useState(false);
const [showCategoriesModal, setShowCategoriesModal] = useState(false);
const [showNotificationModal, setShowNotificationModal] = useState(false);
const [showNotificationSettingsModal, setShowNotificationSettingsModal] = useState(false);
const [showAchievementsModal, setShowAchievementsModal] = useState(false);
const [showNewAchievementModal, setShowNewAchievementModal] = useState(false);
const [newAchievements, setNewAchievements] = useState([]);
// === –ê–Ω–∏–º–∞—Ü–∏–∏ ===
const [hearts, setHearts] = useState([]);
const [petals, setPetals] = useState([]);
// === –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ recordVisit ===
const hasRecordedVisit = useRef(false);
// === –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ===
const relationshipStart = new Date('2007-02-21');
const [daysTogether, setDaysTogether] = useState(0);
const [upcomingEvent, setUpcomingEvent] = useState(null);
const [hasUpcomingNotification, setHasUpcomingNotification] = useState(false);
// === Firebase-–¥–∞–Ω–Ω—ã–µ ===
const {
data: userStats,
loading: statsLoading,
updateData: updateStats
} = useFirebaseDoc('appData', 'userStats', {
totalVisits: 0,
messagesRead: 0,
photosViewed: 0,
categoriesExplored: [],
notificationsEnabled: false,
//firstVisitDate: null,
//lastVisitDate: null,
streakDays: 0,
maxStreak: 0
});
const {
items: userEvents,
loading: eventsLoading,
addItem: addEvent,
removeItem: removeEvent,
updateItem: updateEvent
} = useFirebaseCollection('userEvents');
// === –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –º–æ–¥–∞–ª–æ–∫ —Å–æ–±—ã—Ç–∏–π ===
const [showUserEventsModal, setShowUserEventsModal] = useState(false);
const [showAddEventModal, setShowAddEventModal] = useState(false);
const [showEditEventModal, setShowEditEventModal] = useState(false);
const [showEventDetailsModal, setShowEventDetailsModal] = useState(false);
const [selectedEvent, setSelectedEvent] = useState(null);
const [editingEvent, setEditingEvent] = useState(null);
const [newEvent, setNewEvent] = useState({
title: '',
description: '',
date: '',
emoji: 'üíï'
});
const [eventPhotos, setEventPhotos] = useState([]);
// === –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ===
const generateCustomPhotos = () => {
const photoTitles = [
'–°—Ç—Ä–∞—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞—Å—Ç—å', '–£—é—Ç–Ω–æ–µ –º–µ—Å—Ç–µ—á–∫–æ', '–ë–ª–∞—Ç–Ω—ã–º –ø–æ–≥–æ–¥–∞ –Ω–µ –ø–æ–≥–æ–¥–∞',
'–¶–µ–Ω—Ç—Ä–æ–≤—ã–µ', '–ú–µ—á—Ç–∞—Ç–µ–ª–∏', '–°–≤–∞–¥—å–±–∞01', '–°–≤–∞–¥—å–±–∞02',
'–ü–∏–∫–Ω–∏–∫ –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ', '–í—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä—É–∑—å—è–º–∏', '–ü–æ–µ–∑–¥–∫–∞ –∫ –º–æ—Ä—é', '–ü–µ—Ä–≤—ã–π —Å–æ–≤–º–µ—Å—Ç–Ω—ã–π –ù–ì',
'–†–µ—Å—Ç–æ—Ä–∞–Ω –∫–∞–∂–¥—ã–π –¥–µ–Ω—å', '–¢—ã —Ä—ã–±–∞—á–∫–∞ —è —Ä—ã–±–∞–∫', '–í–æ–¥–æ–ø–∞–¥ –ª—é–±–≤–∏', '–í—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä—É–∑—å—è–º–∏',
'–ü—Ä–æ–≥—É–ª–∫–∞ –ø–æ —Ä–µ–∫–µ', '–ì–æ–¥–æ–≤—â–∏–Ω–∞', '–õ—É—á—à–∏–π –¥—Ä—É–≥', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è', '–í–º–µ—Å—Ç–µ –Ω–∞–≤—Å–µ–≥–¥–∞'
];
return Array.from({ length: 24 }, (_, i) => {
const idx = i + 1;
return {
url: `photos/${String(idx).padStart(2, '0')}.jpg`,
title: photoTitles[i] || `–§–æ—Ç–æ ${idx}`,
id: `custom-${idx}`
};
});
};
const allGalleryImages = generateCustomPhotos();
// === –í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã ===
const importantDates = [
{ date: '2006-07-21', title: '–î–µ–Ω—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞', description: '–ù–∞—à–∞ –ø–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞', emoji: 'üí´' },
{ date: '2007-02-14', title: '–î–µ–Ω—å —Å–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞', description: '–ù–∞—à –ø–µ—Ä–≤—ã–π –î–µ–Ω—å –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö', emoji: 'üíï' },
{ date: '2026-03-08', title: '8 –º–∞—Ä—Ç–∞', description: '–ü—Ä–∞–∑–¥–Ω–∏–∫ –º–æ–µ–π –ø—Ä–∏–Ω—Ü–µ—Å—Å—ã', emoji: 'üå∫' },
{ date: '2025-12-31', title: '–ù–æ–≤—ã–π –≥–æ–¥', description: '–í—Å—Ç—Ä–µ—á–∞–µ–º –≤–º–µ—Å—Ç–µ', emoji: 'üéâ' }
];
// === –ò—Å—Ç–æ—Ä–∏—è –ª—é–±–≤–∏ ===
const loveStory = {
title: "–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è –ª—é–±–≤–∏",
chapters: [
{
date: "–ü–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞",
text: "–ü–æ–º–Ω—é —Ç–æ—Ç –¥–µ–Ω—å, –∫–æ–≥–¥–∞ –º—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å. –¢—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∞ –ø–æ–º–æ—á—å —Ä–∞—Å–ø—É—Ç–∞—Ç—å –ø–ª–µ—Ç–µ–Ω–∫—É. –¢–≤–æ–∏ –≥–ª–∞–∑–∞ —Å–∏—è–ª–∏ —Ç–∞–∫ —è—Ä–∫–æ, —á—Ç–æ —è –ø–æ–Ω—è–ª ‚Äî –º–æ—è –∂–∏–∑–Ω—å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞–≤—Å–µ–≥–¥–∞.",
emotion: "üí´"
},
{
date: "–ü–µ—Ä–≤–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ",
text: "–ù–∞—à–µ –ø–µ—Ä–≤–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ –±—ã–ª–æ –∫–∞–∫ –≤ —Å–∫–∞–∑–∫–µ. –ú—ã –≥–æ–≤–æ—Ä–∏–ª–∏ —á–∞—Å–∞–º–∏, –∏ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å, –∏ –ø–æ—Ç–µ—Ä—è–≤ –≥–æ–ª–æ–≤—É —è –∑–∞–±—ã–ª —Å–≤–æ–∏ –ª—é–±–∏–º—ã–µ –ø–µ—Ä—á–∞—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ª–æ–∂–∏–ª —Ç–µ–±–µ –ø–æ–¥ –∂–æ–ø–∫—É.",
emotion: "üíï"
},
{
date: "–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ",
text: "–ö–æ–≥–¥–∞ —è –≤–ø–µ—Ä–≤—ã–µ —Å–∫–∞–∑–∞–ª —Ç–µ–±–µ '–Ø –ª—é–±–ª—é —Ç–µ–±—è', –º–æ–µ —Å–µ—Ä–¥—Ü–µ –±–∏–ª–æ—Å—å —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ. –¢–≤–æ–π –æ—Ç–≤–µ—Ç —Å—Ç–∞–ª —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –º–æ–º–µ–Ω—Ç–æ–º –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ —á—Ç–æ –º—ã –±—ã–ª–∏ –≤ –ø–æ–¥–≤–∞–ª–µ!",
emotion: "‚ù§Ô∏è"
},
{
date: "–°–µ–≥–æ–¥–Ω—è",
text: "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π ‚Äî —ç—Ç–æ –Ω–æ–≤–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ. –ú–æ—è –ª—é–±–æ–≤—å –∫ —Ç–µ–±–µ —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç–µ—Ç.",
emotion: "üåü"
}
]
};
// === –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ===
const achievements = [
{ id: 'visits_1', title: '–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏', description: '–ü–æ—Å–µ—Ç–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–≤—ã–µ', icon: 'üëã', requirement: 1, type: 'visits', rarity: 'common' },
{ id: 'visits_10', title: '–ß–∞—Å—Ç—ã–π –≥–æ—Å—Ç—å', description: '–ü–æ—Å–µ—Ç–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 10 —Ä–∞–∑', icon: 'üö∂', requirement: 10, type: 'visits', rarity: 'common' },
{ id: 'messages_10', title: '–ß–∏—Ç–∞—Ç–µ–ª—å —Å–µ—Ä–¥—Ü–∞', description: '–ü—Ä–æ—á–∏—Ç–∞–ª 10 –ø—Ä–∏–∑–Ω–∞–Ω–∏–π –≤ –ª—é–±–≤–∏', icon: 'üíå', requirement: 10, type: 'messages', rarity: 'common' },
{ id: 'photos_25', title: '–°–º–æ—Ç—Ä–∏—Ç–µ–ª—å –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π', description: '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–ª 25 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π', icon: 'üì∏', requirement: 25, type: 'photos', rarity: 'common' },
{ id: 'categories_5', title: '–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å —á—É–≤—Å—Ç–≤', description: '–ò–∑—É—á–∏–ª 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏–∑–Ω–∞–Ω–∏–π', icon: 'üîç', requirement: 5, type: 'categories', rarity: 'common' },
{ id: 'notifications', title: '–í—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏', description: '–í–∫–ª—é—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', icon: 'üîî', requirement: 1, type: 'notifications', rarity: 'rare' },
{ id: 'valentines_visit', title: '–î–µ–Ω—å –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö', description: '–ü–æ—Å–µ—Ç–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 14 —Ñ–µ–≤—Ä–∞–ª—è', icon: 'üíù', requirement: 1, type: 'special', rarity: 'epic' },
{ id: 'story_reader', title: '–ó–Ω–∞—Ç–æ–∫ –∏—Å—Ç–æ—Ä–∏–∏', description: '–ü—Ä–æ—á–∏—Ç–∞–ª –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é –ª—é–±–≤–∏', icon: 'üìñ', requirement: 1, type: 'special', rarity: 'common' }
];
// === –ü—Ä–∏–∑–Ω–∞–Ω–∏—è –≤ –ª—é–±–≤–∏ ===
const loveMessagesData = {
loveMessages: [
{ id: 1, text: "–¢—ã - –º–æ–µ —Å–æ–ª–Ω—Ü–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Å–≤–µ—â–∞–µ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚òÄÔ∏è", category: "romantic" },
{ id: 2, text: "–ö–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç —Å —Ç–æ–±–æ–π - —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ ‚ú®", category: "romantic" },
{ id: 11, text: "–° —Ç–æ–±–æ–π —è –ø–æ–Ω—è–ª, —á—Ç–æ —Ç–∞–∫–æ–µ –Ω–∞—Å—Ç–æ—è—â–∞—è –ª—é–±–æ–≤—å üíï", category: "deep" },
{ id: 21, text: "–¢–≤–æ—è —É–ª—ã–±–∫–∞ - —Å–∞–º–æ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ, —á—Ç–æ –µ—Å—Ç—å –≤ –º–æ–µ–º –º–∏—Ä–µ üòä", category: "compliment" },
{ id: 31, text: "–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ üôè", category: "grateful" },
{ id: 41, text: "–ú–æ—è –ª—é–±–æ–≤—å –∫ —Ç–µ–±–µ —Ä–∞—Å—Ç–µ—Ç —Å –∫–∞–∂–¥—ã–º –¥–Ω–µ–º üå±", category: "growing" },
{ id: 51, text: "–¢—ã - –º–æ–µ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ –º–æ—è —Å–∏–ª–∞ üí™", category: "supportive" },
{ id: 61, text: "–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è - –º–æ–π –¥–æ–º, —Ç–≤–æ–∏ –≥—É–±—ã - –º–æ–π —Ä–∞–π üè†", category: "intimate" },
{ id: 71, text: "–ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ —Å —Ç–æ–±–æ–π - —ç—Ç–æ –ø–æ–¥–∞—Ä–æ–∫ —Å—É–¥—å–±—ã üéÅ", category: "daily" },
{ id: 81, text: "–¢—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –æ–±—ã—á–Ω—ã–µ –¥–Ω–∏ –≤ –≤–æ–ª—à–µ–±–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã ‚ú®", category: "magical" },
{ id: 91, text: "–ú–æ–µ —Å–µ—Ä–¥—Ü–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–±–µ, –Ω–∞–≤—Å–µ–≥–¥–∞ üíù", category: "commitment" },
{ id: 101, text: "–° —Ç–æ–±–æ–π —è –≥–æ—Ç–æ–≤ –ø–æ–∫–æ—Ä—è—Ç—å –ª—é–±—ã–µ –≤–µ—Ä—à–∏–Ω—ã üèîÔ∏è", category: "adventure" },
{ id: 111, text: "–¢—ã - –º–æ–π –∞–Ω–≥–µ–ª-—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –∏ –º–æ—è –±–æ–≥–∏–Ω—è üëº", category: "divine" },
{ id: 121, text: "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å üåü", category: "growth" }
],
categories: {
romantic: "–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ",
deep: "–ì–ª—É–±–æ–∫–∏–µ",
compliment: "–ö–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã",
grateful: "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω—ã–µ",
growing: "–†–∞—Å—Ç—É—â–∏–µ",
supportive: "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ",
intimate: "–ò–Ω—Ç–∏–º–Ω—ã–µ",
daily: "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ",
magical: "–í–æ–ª—à–µ–±–Ω—ã–µ",
commitment: "–ü—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å",
adventure: "–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è",
divine: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ",
growth: "–†–æ—Å—Ç"
}
};
// === –≠—Ñ—Ñ–µ–∫—Ç—ã ===
// –†–∞—Å—á—ë—Ç –¥–Ω–µ–π –≤–º–µ—Å—Ç–µ
useEffect(() => {
const today = new Date();
const diffTime = Math.abs(today - relationshipStart);
const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
setDaysTogether(diffDays);
checkUpcomingEvents(today);
}, []);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Ñ–æ—Ç–æ
useEffect(() => {
if (allGalleryImages.length === 0) return;
const interval = setInterval(() => {
setCurrentImageIndex(prev => (prev + 1) % allGalleryImages.length);
}, 10000);
return () => clearInterval(interval);
}, [allGalleryImages.length]);

// –ü–∞–¥–∞—é—â–∏–µ –ª–µ–ø–µ—Å—Ç–∫–∏
useEffect(() => {
const createPetal = () => {
const petal = {
id: Date.now() + Math.random(),
left: Math.random() * 100,
animationDuration: 3 + Math.random() * 3,
size: 12 + Math.random() * 8,
rotation: Math.random() * 360
};
setPetals(prev => [...prev, petal]);
setTimeout(() => setPetals(prev => prev.filter(p => p.id !== petal.id)), petal.animationDuration * 1000);
};
const interval = setInterval(createPetal, 3000);
return () => clearInterval(interval);
}, []);

// –ß–∞—Å—Ç–∏—Ü—ã-—Å–µ—Ä–¥–µ—á–∫–∏
useEffect(() => {
const animate = () => {
setHearts(prev =>
prev.map(h => ({
...h,
x: h.x + h.vx,
y: h.y + h.vy,
vy: h.vy + 0.1,
life: h.life - 0.02
})).filter(h => h.life > 0)
);
};
const interval = setInterval(animate, 16);
return () => clearInterval(interval);
}, []);

// –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
useEffect(() => {
  if (isAuthenticated && !statsLoading && userStats && !hasRecordedVisit.current) {
    hasRecordedVisit.current = true;
    recordVisit();
  }
}, [isAuthenticated, statsLoading, userStats]);

// === –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–±—ã—Ç–∏—è–º–∏ ===
const handleAddEvent = (eventData) => {
const eventToSave = {
  ...eventData,
  createdAt: Date.now(), // ‚Üê —á–∏—Å–ª–æ, –∫–∞–∫ –≤ useFirebaseCollection
  likes: 0
};
addEvent(eventToSave);
setShowAddEventModal(false);
setNewEvent({ title: '', description: '', date: '', emoji: 'üíï' });
};

const handleUpdateEvent = (eventData) => {
updateEvent(eventData.id, {
title: eventData.title,
description: eventData.description,
date: eventData.date,
emoji: eventData.emoji
});
setShowEditEventModal(false);
setEditingEvent(null);
};

const handleDeleteEvent = (eventId) => {
removeEvent(eventId);
};

// === –§—É–Ω–∫—Ü–∏–∏ ===
const handlePasswordSubmit = (e) => {
e.preventDefault();
if (passwordInput === SECRET_PASSWORD) {
setIsAuthenticated(true);
setShowPasswordModal(false);
localStorage.setItem('romantic_app_authenticated', 'true');
recordVisit();
} else {
setAttemptCount(prev => prev + 1);
setPasswordError('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å.');
if (attemptCount >= 2) {
setPasswordError('–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥.');
setTimeout(() => {
setAttemptCount(0);
setPasswordError('');
}, 30000);
}
}
};

const recordVisit = () => {
const todayStr = new Date().toDateString();
const hour = new Date().getHours();
const now = new Date();
const lastVisit = userStats.lastVisitDate ? new Date(userStats.lastVisitDate) : null;
let newStreak = userStats.streakDays;

if (!lastVisit || now.toDateString() !== lastVisit.toDateString()) {
const diffDays = lastVisit
? Math.floor((now - lastVisit) / (1000 * 60 * 60 * 24))
: 1;
newStreak = diffDays === 1 ? userStats.streakDays + 1 : 1;
}

const updatedStats = {
totalVisits: (userStats.totalVisits || 0) + 1,
lastVisitDate: todayStr,
firstVisitDate: userStats.firstVisitDate || todayStr,
streakDays: newStreak,
maxStreak: Math.max(userStats.maxStreak || 0, newStreak)
};

updateStats(updatedStats);
setTimeout(() => checkAchievements({ ...userStats, ...updatedStats }, { currentHour: hour }), 1000);
};

const checkAchievements = (stats, context = {}) => {
const unlocked = new Set(JSON.parse(localStorage.getItem('unlocked_achievements') || '[]'));
const newlyUnlocked = [];

achievements.forEach(a => {
if (unlocked.has(a.id)) return;
let unlockedNow = false;

switch (a.type) {
case 'visits': unlockedNow = stats.totalVisits >= a.requirement; break;
case 'messages': unlockedNow = stats.messagesRead >= a.requirement; break;
case 'photos': unlockedNow = stats.photosViewed >= a.requirement; break;
case 'categories': unlockedNow = (stats.categoriesExplored?.length || 0) >= a.requirement; break;
case 'notifications': unlockedNow = stats.notificationsEnabled; break;
case 'special':
if (a.id === 'valentines_visit') {
const d = new Date();
unlockedNow = d.getMonth() === 1 && d.getDate() === 14;
} else if (a.id === 'story_reader') {
unlockedNow = context.storyRead;
}
break;
}

if (unlockedNow) {
newlyUnlocked.push(a);
unlocked.add(a.id);
}
});

if (newlyUnlocked.length > 0) {
localStorage.setItem('unlocked_achievements', JSON.stringify([...unlocked]));
setNewAchievements(newlyUnlocked);
setShowNewAchievementModal(true);
}
};

const generateLoveMessage = () => {
const filtered = selectedCategory === 'all'
? loveMessagesData.loveMessages
: loveMessagesData.loveMessages.filter(m => m.category === selectedCategory);

const msg = filtered[Math.floor(Math.random() * filtered.length)];
setCurrentLoveMessage(msg);
updateStats({ messagesRead: (userStats.messagesRead || 0) + 1 });
};

const createHeartParticles = (e) => {
const rect = e.currentTarget.getBoundingClientRect();
const cx = rect.left + rect.width / 2;
const cy = rect.top + rect.height / 2;

for (let i = 0; i < 4; i++) {
setHearts(prev => [...prev, {
id: Date.now() + Math.random(),
x: cx,
y: cy,
vx: (Math.random() - 0.5) * 3,
vy: -Math.random() * 2 - 1,
life: 1,
size: 12 + Math.random() * 8
}]);
}
};

const checkUpcomingEvents = (today) => {
const threeDaysLater = new Date(today);
threeDaysLater.setDate(today.getDate() + 3);

for (const item of importantDates) {
const eventDate = new Date(item.date);
if (eventDate >= today && eventDate <= threeDaysLater) {
const daysUntil = Math.ceil((eventDate - today) / (1000 * 60 * 60 * 24));
setUpcomingEvent({ ...item, daysUntil, isToday: daysUntil === 0, isTomorrow: daysUntil === 1 });
setHasUpcomingNotification(true);
setTimeout(() => setShowNotificationModal(true), 2000);
break;
}
}
};

const getCategoryIcon = (cat) => {
const icons = {
romantic: 'üíï', deep: '‚ù§Ô∏è', compliment: 'üåü', grateful: 'üôè', growing: 'üå±',
supportive: 'üí™', intimate: 'üíã', daily: '‚òÄÔ∏è', magical: '‚ú®', commitment: 'üíç',
adventure: 'üóª', divine: 'üëº', growth: 'üìà'
};
return icons[cat] || 'üíù';
};

const getRarityColor = (rarity) => {
const map = {
common: 'from-gray-400 to-gray-600',
rare: 'from-blue-400 to-blue-600',
epic: 'from-purple-400 to-purple-600',
legendary: 'from-yellow-400 to-yellow-600'
};
return map[rarity] || map.common;
};

const getRarityName = (rarity) => {
const map = {
common: '–û–±—ã—á–Ω–æ–µ',
rare: '–†–µ–¥–∫–æ–µ',
epic: '–≠–ø–∏—á–µ—Å–∫–æ–µ',
legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ'
};
return map[rarity] || map.common;
};
// === –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ ===
if (!isAuthenticated) {
return (
<div className="min-h-screen bg-gradient-to-br from-pink-400 via-purple-500 to-indigo-600 flex items-center justify-center p-4">
<div className="bg-white/95 backdrop-blur-lg rounded-3xl p-8 w-full max-w-sm shadow-2xl border border-white/20">
<div className="text-center mb-8">
<div className="text-6xl mb-4 animate-bounce">üíù</div>
<h1 className="text-3xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3">
Love Access
</h1>
<p className="text-gray-600">–ú–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Å –¥–≤–æ–∏—Ö üíï</p>
</div>
<form onSubmit={handlePasswordSubmit} className="space-y-4">
<div className="relative">
<input
type="password"
value={passwordInput}
onChange={(e) => setPasswordInput(e.target.value)}
placeholder="–ù–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥..."
className="w-full px-4 py-4 pl-12 border-2 border-pink-200 rounded-2xl focus:outline-none focus:border-pink-500"
autoFocus
disabled={attemptCount >= 3}
/>
<div className="absolute left-4 top-1/2 transform -translate-y-1/2 text-pink-400">üîê</div>
</div>
{passwordError && (
<div className="text-red-500 text-sm text-center bg-red-50 p-3 rounded-xl animate-shake">
{passwordError}
</div>
)}
<button
type="submit"
disabled={attemptCount >= 3 || !passwordInput}
className="w-full gradient-button text-white py-4 rounded-2xl font-bold text-lg disabled:opacity-50"
>
–í–æ–π—Ç–∏ –≤ –Ω–∞—à –º–∏—Ä üíï
</button>
</form>
<div className="mt-6 text-center text-gray-400 text-sm">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–∞—Ç–∞ –Ω–∞—à–µ–π –ª—é–±–≤–∏ üíù</div>
</div>
</div>
);
}

// === –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ===
return (
<div className="min-h-screen bg-gradient-to-br from-pink-100 via-purple-50 to-blue-100 pb-24 safe-area-inset">
{/* –ê–Ω–∏–º–∞—Ü–∏–∏ */}
{petals.map(p => (
<div key={p.id} className="fixed pointer-events-none z-0 text-pink-400"
style={{
left: `${p.left}%`,
top: '-20px',
fontSize: `${p.size}px`,
animation: `fall ${p.animationDuration}s linear forwards`,
transform: `rotate(${p.rotation}deg)`
}}>
üå∏
</div>
))}
{hearts.map(h => (
<div key={h.id} className="fixed pointer-events-none z-10"
style={{
left: h.x,
top: h.y,
opacity: h.life,
fontSize: h.size,
transform: `scale(${h.life})`
}}>
‚ù§Ô∏è
</div>
))}

{/* –®–∞–ø–∫–∞ */}
<div className="bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white p-4 pt-8 rounded-b-3xl shadow-lg">
<div className="flex justify-between items-center mb-4">
<div>
<h1 className="text-xl font-bold">üíï –î–ª—è —Ç–µ–±—è, –ª—é–±–∏–º–∞—è</h1>
<p className="text-pink-100 text-sm">–ù–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª—é–±–≤–∏</p>
</div>
<div className="flex gap-2">
<button onClick={() => setShowNotificationSettingsModal(true)} className="relative bg-white/20 p-2 rounded-full">üîî
{hasUpcomingNotification && <span className="absolute -top-1 -right-1 bg-red-500 w-3 h-3 rounded-full animate-pulse"></span>}
</button>
<button onClick={() => setShowAchievementsModal(true)} className="bg-white/20 p-2 rounded-full">üèÜ</button>
</div>
</div>
<div className="bg-white/20 backdrop-blur rounded-2xl p-4 text-center">
<div className="text-4xl font-bold mb-1">{daysTogether}</div>
<div className="text-pink-100">–¥–Ω–µ–π –≤–º–µ—Å—Ç–µ üíù</div>
<div className="text-xs text-pink-200 mt-1">—Å {relationshipStart.toLocaleDateString('ru-RU')}</div>
</div>
</div>

{/* –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ */}
<div className="p-4">
<div className="relative rounded-3xl overflow-hidden shadow-xl h-64 cursor-pointer"
onClick={() => {
setShowGalleryModal(true);
updateStats({ photosViewed: (userStats.photosViewed || 0) + 1 });
}}>
{allGalleryImages.length > 0 && (
<>
<img src={allGalleryImages[currentImageIndex]?.url} alt="–ù–∞—à–µ —Ñ–æ—Ç–æ"
className="w-full h-full object-cover"
onError={(e) => e.target.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23f0f0f0" width="100" height="100"/><text x="50" y="55" text-anchor="middle" font-size="40">üíï</text></svg>'} />
<div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
<p className="text-white text-sm font-medium">{allGalleryImages[currentImageIndex]?.title || '–ù–∞—à–∏ –º–æ–º–µ–Ω—Ç—ã'}</p>
<p className="text-white/80 text-xs">{currentImageIndex + 1} / {allGalleryImages.length} ‚Ä¢ –ù–∞–∂–º–∏ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏</p>
</div>
</>
)}
</div>
</div>

{/* –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–∑–Ω–∞–Ω–∏–π */}
<div className="px-4 mb-4">
<div className="bg-white rounded-3xl p-5 shadow-lg">
<div className="flex justify-between items-center mb-3">
<h2 className="font-bold text-gray-800">üíå –ü—Ä–∏–∑–Ω–∞–Ω–∏–µ –≤ –ª—é–±–≤–∏</h2>
<button onClick={() => setShowCategoriesModal(true)} className="text-xs bg-pink-100 text-pink-600 px-3 py-1 rounded-full">
{selectedCategory === 'all' ? '–í—Å–µ' : loveMessagesData.categories[selectedCategory]}
</button>
</div>
<div className="min-h-24 flex items-center justify-center text-center p-4 bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl mb-4">
{currentLoveMessage ? (
<p className="text-gray-700 text-lg leading-relaxed">{currentLoveMessage.text}</p>
) : (
<p className="text-gray-400">–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ ‚ù§Ô∏è</p>
)}
</div>
<button onClick={(e) => { generateLoveMessage(); createHeartParticles(e); }}
className="w-full gradient-button text-white py-4 rounded-2xl font-bold shadow-lg active:scale-95 transition-transform">
–ù–æ–≤–æ–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ üíï
</button>
</div>
</div>

{/* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}
<div className="px-4 mb-4">
<div className="grid grid-cols-2 gap-3">
<button onClick={() => { setShowStoryModal(true); checkAchievements(userStats, { storyRead: true }); }}
className="bg-white rounded-2xl p-4 shadow-lg text-center action-button smooth-transition">
<div className="text-3xl mb-2">üìñ</div>
<div className="font-medium text-gray-800">–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è</div>
<div className="text-xs text-gray-500">–ö–∞–∫ –≤—Å—ë –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å</div>
</button>
<button onClick={() => { setShowCalendarModal(true); checkAchievements(userStats, { calendarViewed: true }); }}
className="bg-white rounded-2xl p-4 shadow-lg text-center action-button smooth-transition">
<div className="text-3xl mb-2">üìÖ</div>
<div className="font-medium text-gray-800">–í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã</div>
<div className="text-xs text-gray-500">–ù–∞—à–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏</div>
</button>
<button onClick={() => setShowGalleryModal(true)}
className="bg-white rounded-2xl p-4 shadow-lg text-center action-button smooth-transition">
<div className="text-3xl mb-2">üì∏</div>
<div className="font-medium text-gray-800">–ì–∞–ª–µ—Ä–µ—è</div>
<div className="text-xs text-gray-500">{allGalleryImages.length} —Ñ–æ—Ç–æ</div>
</button>
<button onClick={() => setShowUserEventsModal(true)}
className="bg-white rounded-2xl p-4 shadow-lg text-center action-button smooth-transition">
<div className="text-3xl mb-2">üéâ</div>
<div className="font-medium text-gray-800">–°–æ–±—ã—Ç–∏—è</div>
<div className="text-xs text-gray-500">{userEvents.length} –∑–∞–ø–∏—Å–µ–π</div>
</button>
</div>
</div>

{/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
<div className="px-4 mb-4">
<div className="bg-gradient-to-r from-pink-500 to-purple-500 rounded-3xl p-5 text-white shadow-lg">
<h3 className="font-bold mb-4 text-lg">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª—é–±–≤–∏</h3>
<div className="grid grid-cols-3 gap-3 text-center">
<div className="bg-white/20 rounded-2xl p-3">
<div className="text-2xl font-bold">{userStats.totalVisits || 0}</div>
<div className="text-xs opacity-80">–ü–æ—Å–µ—â–µ–Ω–∏–π</div>
</div>
<div className="bg-white/20 rounded-2xl p-3">
<div className="text-2xl font-bold">{userStats.messagesRead || 0}</div>
<div className="text-xs opacity-80">–ü—Ä–∏–∑–Ω–∞–Ω–∏–π</div>
</div>
<div className="bg-white/20 rounded-2xl p-3">
<div className="text-2xl font-bold">{userStats.streakDays || 0}</div>
<div className="text-xs opacity-80">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
</div>
</div>
</div>
</div>

{/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */}
{showGalleryModal && (
<GalleryModal
images={allGalleryImages}
currentIndex={currentImageIndex}
setCurrentIndex={setCurrentImageIndex}
onClose={() => setShowGalleryModal(false)}
updateStats={updateStats}
userStats={userStats}
/> )}

{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏—Å—Ç–æ—Ä–∏–∏ */}
{showStoryModal && (
<StoryModal
story={loveStory}
onClose={() => setShowStoryModal(false)}
/> )}

{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–≤–∞–∂–Ω—ã—Ö –¥–∞—Ç) */}
{showCalendarModal && (
<CalendarModal
importantDates={importantDates}
onClose={() => setShowCalendarModal(false)}
/> )}

{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */}
{showCategoriesModal && (
<CategoriesModal
categories={loveMessagesData.categories}
selectedCategory={selectedCategory}
onSelect={(cat) => {
setSelectedCategory(cat);
// –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–∑—É—á–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
if (cat !== 'all' && !userStats.categoriesExplored.includes(cat)) {
const newCategories = [...(userStats.categoriesExplored || []), cat];
updateStats({ categoriesExplored: newCategories });
}
}}
onClose={() => setShowCategoriesModal(false)}
/> )}

{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */}
{showNotificationSettingsModal && (
<NotificationSettingsModal
userStats={userStats}
updateStats={updateStats}
onClose={() => setShowNotificationSettingsModal(false)}
/> )}

{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π */}
{showAchievementsModal && (
<AchievementsModal
achievements={achievements}
userStats={userStats}
onClose={() => setShowAchievementsModal(false)}
/> )}

{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π */}
{showNewAchievementModal && (
<NewAchievementModal
achievements={newAchievements}
onClose={() => {
setShowNewAchievementModal(false);
setNewAchievements([]);
}}
/> )}

{/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º —Å–æ–±—ã—Ç–∏–∏ */}
{showNotificationModal && upcomingEvent && (
<div className="fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl p-6 w-full max-w-sm text-center">
<div className="text-6xl mb-4">{upcomingEvent.emoji}</div>
<h2 className="text-xl font-bold text-gray-800 mb-2">
{upcomingEvent.isToday
? `üéâ –°–µ–≥–æ–¥–Ω—è: ${upcomingEvent.title}!`
: upcomingEvent.isTomorrow
? `üíï –ó–∞–≤—Ç—Ä–∞: ${upcomingEvent.title}!`
: `‚è∞ –ß–µ—Ä–µ–∑ ${upcomingEvent.daysUntil} –¥–Ω—è: ${upcomingEvent.title}`}
</h2>
<p className="text-gray-600 mb-4">{upcomingEvent.description}</p>
<button
onClick={() => setShowNotificationModal(false)}
className="gradient-button text-white py-3 px-8 rounded-2xl font-bold w-full"
>
–ü–æ–Ω—è–ª! üíï
</button>
</div>
</div>
)}

{/* –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –°–û–ë–´–¢–ò–ô - –ù–û–í–û–ï */}
{showUserEventsModal && (
<UserEventsModal
events={userEvents}
onAdd={() => {
setShowUserEventsModal(false);
setShowAddEventModal(true);
}}
onEdit={(event) => {
setEditingEvent(event);
setShowUserEventsModal(false);
setShowEditEventModal(true);
}}
onView={(event) => {
setSelectedEvent(event);
setShowUserEventsModal(false);
setShowEventDetailsModal(true);
}}
onDelete={handleDeleteEvent}
onClose={() => setShowUserEventsModal(false)}
loading={eventsLoading}
/> )}

{showAddEventModal && (
<EventFormModal
onSubmit={handleAddEvent}
onCancel={() => {
setShowAddEventModal(false);
setShowUserEventsModal(true);
}}
/> )}

{showEditEventModal && editingEvent && (
<EventFormModal
event={editingEvent}
onSubmit={handleUpdateEvent}
onCancel={() => {
setShowEditEventModal(false);
setShowUserEventsModal(true);
setEditingEvent(null);
}}
isEditing={true}
/> )}

{showEventDetailsModal && selectedEvent && (
<EventDetailsModal
event={selectedEvent}
onClose={() => {
setShowEventDetailsModal(false);
setShowUserEventsModal(true);
}}
/> )}
</div>
);
};
// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ò–°–¢–û–†–ò–ò –õ–Æ–ë–í–ò
// ============================================
const StoryModal = ({ story, onClose }) => {
return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto custom-scrollbar">
<div className="p-6">
<div className="flex justify-between items-center mb-6">
<h2 className="text-2xl font-bold text-gray-800">{story.title}</h2>
<button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>
<div className="space-y-6">
{story.chapters.map((chapter, index) => (
<div key={index} className="bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-5 border border-pink-100">
<div className="flex items-start gap-3">
<span className="text-2xl mt-1">{chapter.emotion}</span>
<div>
<h3 className="font-bold text-gray-800 mb-2">{chapter.date}</h3>
<p className="text-gray-600 leading-relaxed">{chapter.text}</p>
</div>
</div>
</div>
))}
</div>
<div className="mt-8 text-center">
<button
onClick={onClose}
className="gradient-button text-white px-6 py-3 rounded-2xl font-medium"
>
–ó–∞–∫—Ä—ã—Ç—å ‚ù§Ô∏è
</button>
</div>
</div>
</div>
</div>
);
};
// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–ê–õ–ï–ù–î–ê–†–Ø (–í–ê–ñ–ù–´–• –î–ê–¢)
// ============================================
const CalendarModal = ({ importantDates, onClose }) => {
const today = new Date();
return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto custom-scrollbar">
<div className="p-6">
<div className="flex justify-between items-center mb-6">
<h2 className="text-2xl font-bold text-gray-800">üìÖ –í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã</h2>
<button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>
<div className="space-y-4">
{importantDates.map((event, index) => {
const eventDate = new Date(event.date);
const isToday = eventDate.toDateString() === today.toDateString();
const daysDiff = Math.ceil((eventDate - today) / (1000 * 60 * 60 * 24));
const isUpcoming = daysDiff > 0 && daysDiff <= 30;

return (
<div key={index} className={`p-4 rounded-2xl border ${
isToday
? 'bg-yellow-50 border-yellow-200'
: isUpcoming
? 'bg-green-50 border-green-200'
: 'bg-gray-50 border-gray-200'
}`}>
<div className="flex items-center gap-3">
<span className="text-2xl">{event.emoji}</span>
<div className="flex-1">
<h3 className="font-bold text-gray-800">{event.title}</h3>
<p className="text-gray-600 text-sm">{event.description}</p>
<p className="text-xs text-gray-500 mt-1">
{eventDate.toLocaleDateString('ru-RU')}
{isToday && ' ‚Ä¢ –°–µ–≥–æ–¥–Ω—è! üéâ'}
{isUpcoming && !isToday && ` ‚Ä¢ –ß–µ—Ä–µ–∑ ${daysDiff} –¥–Ω.`}
</p>
</div>
</div>
</div>
);
})}
</div>
<div className="mt-8 text-center">
<button
onClick={onClose}
className="gradient-button text-white px-6 py-3 rounded-2xl font-medium"
>
–ó–∞–∫—Ä—ã—Ç—å üíï
</button>
</div>
</div>
</div>
</div>
);
};
// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–ê–¢–ï–ì–û–†–ò–ô –ü–†–ò–ó–ù–ê–ù–ò–ô
// ============================================
const CategoriesModal = ({ categories, selectedCategory, onSelect, onClose }) => {
const categoryList = Object.entries(categories).map(([key, name]) => ({ key, name }));

return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto custom-scrollbar">
<div className="p-6">
<div className="flex justify-between items-center mb-6">
<h2 className="text-2xl font-bold text-gray-800">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
<button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>
<div className="grid grid-cols-2 gap-3">
<button
onClick={() => onSelect('all')}
className={`p-4 rounded-2xl border-2 text-center ${
selectedCategory === 'all'
? 'border-pink-500 bg-pink-50 text-pink-700'
: 'border-gray-200 bg-gray-50 text-gray-700'
}`}
>
<div className="text-2xl mb-2">üíù</div>
<div className="font-medium">–í—Å–µ</div>
</button>
{categoryList.map(({ key, name }) => (
<button
key={key}
onClick={() => onSelect(key)}
className={`p-4 rounded-2xl border-2 text-center ${
selectedCategory === key
? 'border-purple-500 bg-purple-50 text-purple-700'
: 'border-gray-200 bg-gray-50 text-gray-700'
}`}
>
<div className="text-2xl mb-2">
{key === 'romantic' ? 'üíï' :
key === 'deep' ? '‚ù§Ô∏è' :
key === 'compliment' ? 'üåü' :
key === 'grateful' ? 'üôè' :
key === 'growing' ? 'üå±' :
key === 'supportive' ? 'üí™' :
key === 'intimate' ? 'üíã' :
key === 'daily' ? '‚òÄÔ∏è' :
key === 'magical' ? '‚ú®' :
key === 'commitment' ? 'üíç' :
key === 'adventure' ? 'üóª' :
key === 'divine' ? 'üëº' :
key === 'growth' ? 'üìà' : 'üíù'}
</div>
<div className="font-medium text-sm">{name}</div>
</button>
))}
</div>
<div className="mt-8 text-center">
<button
onClick={onClose}
className="gradient-button text-white px-6 py-3 rounded-2xl font-medium"
>
–í—ã–±—Ä–∞—Ç—å üíñ
</button>
</div>
</div>
</div>
</div>
);
};
// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ù–ê–°–¢–†–û–ï–ö –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
// ============================================
const NotificationSettingsModal = ({ userStats, updateStats, onClose }) => {
const [notificationsEnabled, setNotificationsEnabled] = useState(userStats.notificationsEnabled || false);

const handleToggle = () => {
const newValue = !notificationsEnabled;
setNotificationsEnabled(newValue);
updateStats({ notificationsEnabled: newValue });

if (newValue && Notification.permission !== 'granted') {
Notification.requestPermission().then(permission => {
if (permission === 'granted') {
new Notification('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã!', {
body: '–¢–µ–ø–µ—Ä—å –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –¥–∞—Ç–∞—Ö üíï',
icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üíù</text></svg>'
});
}
});
}
};

return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full">
<div className="p-6">
<div className="flex justify-between items-center mb-6">
<h2 className="text-2xl font-bold text-gray-800">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
<button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>
<div className="space-y-4">
<div className="flex items-center justify-between p-4 bg-gray-50 rounded-2xl">
<div>
<h3 className="font-medium text-gray-800">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –¥–∞—Ç–∞—Ö</h3>
<p className="text-sm text-gray-600">–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 3 –¥–Ω—è –¥–æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π</p>
</div>
<button
onClick={handleToggle}
className={`w-14 h-7 rounded-full relative transition-colors ${
notificationsEnabled ? 'bg-pink-500' : 'bg-gray-300'
}`}
>
<div className={`w-5 h-5 bg-white rounded-full absolute top-1 transition-transform ${
notificationsEnabled ? 'left-8' : 'left-1'
}`}></div>
</button>
</div>
<div className="bg-blue-50 border border-blue-200 rounded-2xl p-4">
<h3 className="font-medium text-blue-800 mb-2">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
<p className="text-sm text-blue-700">
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∏—Ö –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
–û–Ω–∏ –ø–æ–º–æ–≥—É—Ç –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—à–∏ –æ—Å–æ–±–µ–Ω–Ω—ã–µ –¥–Ω–∏!
</p>
</div>
</div>
<div className="mt-8 text-center">
<button
onClick={onClose}
className="gradient-button text-white px-6 py-3 rounded-2xl font-medium"
>
–ì–æ—Ç–æ–≤–æ üíï
</button>
</div>
</div>
</div>
</div>
);
};
// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–û–°–¢–ò–ñ–ï–ù–ò–ô
// ============================================
const AchievementsModal = ({ achievements, userStats, onClose }) => {
const unlockedAchievements = JSON.parse(localStorage.getItem('unlocked_achievements') || '[]');

const getAchievementProgress = (achievement) => {
switch (achievement.type) {
case 'visits': return Math.min(100, ((userStats.totalVisits || 0) / achievement.requirement) * 100);
case 'messages': return Math.min(100, ((userStats.messagesRead || 0) / achievement.requirement) * 100);
case 'photos': return Math.min(100, ((userStats.photosViewed || 0) / achievement.requirement) * 100);
case 'categories': return Math.min(100, (((userStats.categoriesExplored?.length || 0) / achievement.requirement) * 100));
case 'notifications': return userStats.notificationsEnabled ? 100 : 0;
case 'special':
if (achievement.id === 'valentines_visit') {
const d = new Date();
return (d.getMonth() === 1 && d.getDate() === 14) ? 100 : 0;
} else if (achievement.id === 'story_reader') {
// –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ —ç—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –∏—Å—Ç–æ—Ä–∏—è —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–∞
return 100;
}
return 0;
default: return 0;
}
};

const getRarityColor = (rarity) => {
const map = {
common: 'border-gray-300 bg-gray-50',
rare: 'border-blue-300 bg-blue-50',
epic: 'border-purple-300 bg-purple-50',
legendary: 'border-yellow-300 bg-yellow-50'
};
return map[rarity] || map.common;
};

const getRarityName = (rarity) => {
const map = {
common: '–û–±—ã—á–Ω–æ–µ',
rare: '–†–µ–¥–∫–æ–µ',
epic: '–≠–ø–∏—á–µ—Å–∫–æ–µ',
legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ'
};
return map[rarity] || map.common;
};

return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto custom-scrollbar">
<div className="p-6">
<div className="flex justify-between items-center mb-6">
<h2 className="text-2xl font-bold text-gray-800">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
<button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>
<div className="space-y-4">
{achievements.map((achievement) => {
const isUnlocked = unlockedAchievements.includes(achievement.id);
const progress = getAchievementProgress(achievement);

return (
<div key={achievement.id} className={`p-4 rounded-2xl border-2 ${getRarityColor(achievement.rarity)}`}>
<div className="flex items-center gap-3 mb-2">
<span className="text-2xl">{achievement.icon}</span>
<div className="flex-1">
<h3 className="font-bold text-gray-800">{achievement.title}</h3>
<p className="text-xs text-gray-600">{getRarityName(achievement.rarity)}</p>
</div>
{isUnlocked && (
<span className="text-green-500 font-bold">‚úì</span>
)}
</div>
<p className="text-sm text-gray-600 mb-2">{achievement.description}</p>
{!isUnlocked && (
<div className="space-y-1">
<div className="flex justify-between text-xs text-gray-600">
<span>–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
<span>{Math.round(progress)}%</span>
</div>
<div className="w-full bg-gray-200 rounded-full h-2">
<div
className="bg-gradient-to-r from-pink-500 to-purple-500 h-2 rounded-full transition-all duration-500"
style={{ width: `${progress}%` }}
></div>
</div>
</div>
)}
</div>
);
})}
</div>
<div className="mt-8 text-center">
<button
onClick={onClose}
className="gradient-button text-white px-6 py-3 rounded-2xl font-medium"
>
–ó–∞–∫—Ä—ã—Ç—å üèÜ
</button>
</div>
</div>
</div>
</div>
);
};
// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ù–û–í–´–• –î–û–°–¢–ò–ñ–ï–ù–ò–ô
// ============================================
const NewAchievementModal = ({ achievements, onClose }) => {
if (achievements.length === 0) return null;

return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 animate-pulse">
<div className="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-3xl max-w-md w-full p-6 text-center shadow-2xl">
<div className="text-6xl mb-4">üéâ</div>
<h2 className="text-2xl font-bold text-white mb-4">–ù–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!</h2>
<div className="space-y-3 mb-6">
{achievements.map((achievement, index) => (
<div key={index} className="bg-white/20 backdrop-blur rounded-2xl p-3">
<div className="flex items-center justify-center gap-2">
<span className="text-2xl">{achievement.icon}</span>
<span className="font-bold text-white">{achievement.title}</span>
</div>
</div>
))}
</div>
<button
onClick={onClose}
className="bg-white text-orange-600 px-6 py-3 rounded-2xl font-bold hover:bg-gray-100 transition-colors"
>
–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å üíï
</button>
</div>
</div>
);
};
// ============================================
// –ö–û–ú–ü–û–ù–ï–ù–¢ –°–û–ë–´–¢–ò–ô –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
// ============================================
const UserEventsModal = ({
  events,
  onAdd,
  onEdit,
  onView,
  onDelete,
  onClose,
  loading,
}) => {
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(null);

  // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
  if (loading) {
    return (
      <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center">
        <div className="bg-white rounded-3xl p-8 text-center">
          <div className="animate-spin text-4xl mb-4">üíï</div>
          <p className="text-gray-600">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π...</p>
        </div>
      </div>
    );
  }

  // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É), –Ω–µ –º—É—Ç–∏—Ä—É—è –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤
  const sortedEvents = [...events].sort(
    (a, b) => new Date(b.date) - new Date(a.date)
  );

  return (
    <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
      <div className="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto custom-scrollbar">
        <div className="p-6">
          {/* –®–∞–ø–∫–∞ –º–æ–¥–∞–ª–∫–∏ */}
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-bold text-gray-800">üéâ –ú–æ–∏ —Å–æ–±—ã—Ç–∏—è</h2>
            <div className="flex gap-2">
              <button
                onClick={onAdd}
                className="bg-pink-500 text-white p-2 rounded-full text-sm hover:bg-pink-600 transition"
                aria-label="–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ"
              >
                +
              </button>
              <button
                onClick={onClose}
                className="text-gray-500 hover:text-gray-700 text-2xl"
                aria-label="–ó–∞–∫—Ä—ã—Ç—å"
              >
                ‚úï
              </button>
            </div>
          </div>

          {/* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */}
          {events.length === 0 ? (
            <div className="text-center py-8">
              <div className="text-4xl mb-4">üìù</div>
              <p className="text-gray-600">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π</p>
              <p className="text-sm text-gray-500 mt-2">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ!</p>
            </div>
          ) : (
            /* –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π */
            <div className="space-y-3">
              {sortedEvents.map((event) => (
                <div
                  key={event.id}
                  className="p-4 bg-gray-50 rounded-2xl border border-gray-200"
                >
                  <div className="flex items-start justify-between">
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 mb-2">
                        <span className="text-xl flex-shrink-0">
                          {event.emoji || 'üíï'}
                        </span>
                        <h3 className="font-bold text-gray-800 truncate">
                          {event.title}
                        </h3>
                      </div>
                      {event.description && (
                        <p className="text-gray-600 text-sm mb-2 line-clamp-2">
                          {event.description}
                        </p>
                      )}
                      {event.date && (
                        <p className="text-xs text-gray-500">
                          {new Date(event.date).toLocaleDateString('ru-RU', {
                            day: '2-digit',
                            month: 'long',
                            year: 'numeric',
                          })}
                        </p>
                      )}
                    </div>
                    <div className="flex gap-1 flex-shrink-0 ml-2">
                      <button
                        onClick={() => onView(event)}
                        className="text-gray-500 hover:text-blue-500 p-1 transition"
                        aria-label={`–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–±—ã—Ç–∏—è: ${event.title}`}
                      >
                        üëÅÔ∏è
                      </button>
                      <button
                        onClick={() => onEdit(event)}
                        className="text-gray-500 hover:text-green-500 p-1 transition"
                        aria-label={`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ: ${event.title}`}
                      >
                        ‚úèÔ∏è
                      </button>
                      <button
                        onClick={() => setShowDeleteConfirm(event.id)}
                        className="text-gray-500 hover:text-red-500 p-1 transition"
                        aria-label={`–£–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ: ${event.title}`}
                      >
                        üóëÔ∏è
                      </button>
                    </div>
                  </div>

                  {/* –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è */}
                  {showDeleteConfirm === event.id && (
                    <div className="mt-3 p-3 bg-red-50 border border-red-200 rounded-lg">
                      <p className="text-red-700 text-sm mb-2">–£–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ?</p>
                      <div className="flex gap-2">
                        <button
                          onClick={() => {
                            onDelete(event.id);
                            setShowDeleteConfirm(null);
                          }}
                          className="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition"
                        >
                          –î–∞
                        </button>
                        <button
                          onClick={() => setShowDeleteConfirm(null)}
                          className="bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-300 transition"
                        >
                          –û—Ç–º–µ–Ω–∞
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

// ============================================
// –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø/–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –°–û–ë–´–¢–ò–Ø
// ============================================
const EventFormModal = ({
event,
onSubmit,
onCancel,
isEditing = false
}) => {
const [formData, setFormData] = useState({
title: event?.title || '',
description: event?.description || '',
date: event?.date ? new Date(event.date).toISOString().split('T')[0] : '',
emoji: event?.emoji || 'üíï'
});

const emojis = ['üíï', 'üéâ', 'üéä', 'üéà', 'üéÅ', 'ü•Ç', 'üçæ', 'üéÇ', 'üíê', 'üåπ', 'üå∫', 'üå∏', 'üå∑', 'üåº', 'üåª', '‚≠ê', 'üåü', '‚ú®', 'üí´', 'üíñ', 'üíó', 'üíì', 'üíû', 'üíò', 'üíå'];

const handleSubmit = (e) => {
  e.preventDefault();
  if (!formData.title.trim()) return;

  const payload = {
    ...formData,
    createdAt: new Date().toISOString(), // ‚Üê –¥–æ–±–∞–≤—å—Ç–µ —Å—Ä–∞–∑—É –∑–¥–µ—Å—å (–∏–ª–∏ –≤ handleAddEvent)
    likes: 0
  };

  // –£–¥–∞–ª—è–µ–º id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ (Firebase —Å–∞–º –µ–≥–æ –Ω–∞–∑–Ω–∞—á–∏—Ç)
  if (isEditing && event?.id) {
    payload.id = event.id;
  }

  onSubmit(payload);
};

return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full">
<div className="p-6">
<div className="flex justify-between items-center mb-6">
<h2 className="text-2xl font-bold text-gray-800">
{isEditing ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ' : '–ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ'}
</h2>
<button onClick={onCancel} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>
<form onSubmit={handleSubmit} className="space-y-4">
<div>
<label className="block text-sm font-medium text-gray-700 mb-2">–≠–º–æ–¥–∑–∏</label>
<div className="flex flex-wrap gap-2">
{emojis.map(emoji => (
<button
key={emoji}
type="button"
onClick={() => setFormData(prev => ({ ...prev, emoji }))}
className={`text-2xl p-2 rounded-lg ${
formData.emoji === emoji
? 'bg-pink-100 border-2 border-pink-300'
: 'bg-gray-100 hover:bg-gray-200'
}`}
>
{emoji}
</button>
))}
</div>
</div>

<div>
<label className="block text-sm font-medium text-gray-700 mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
<input
type="text"
value={formData.title}
onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}
className="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:border-pink-500"
placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"
required
/>
</div>

<div>
<label className="block text-sm font-medium text-gray-700 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ</label>
<textarea
value={formData.description}
onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}
className="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:border-pink-500"
placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"
rows="3"
/>
</div>

<div>
<label className="block text-sm font-medium text-gray-700 mb-2">–î–∞—Ç–∞</label>
<input
type="date"
value={formData.date}
onChange={(e) => setFormData(prev => ({ ...prev, date: e.target.value }))}
className="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:border-pink-500"
/>
</div>

<div className="flex gap-3 pt-4">
<button
type="submit"
className="flex-1 gradient-button text-white py-3 rounded-2xl font-medium"
>
{isEditing ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å'}
</button>
<button
type="button"
onClick={onCancel}
className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-2xl font-medium hover:bg-gray-300"
>
–û—Ç–º–µ–Ω–∞
</button>
</div>
</form>
</div>
</div>
</div>
);
};

// ============================================
// –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–û–î–†–û–ë–ù–û–°–¢–ï–ô –°–û–ë–´–¢–ò–Ø
// ============================================
const EventDetailsModal = ({ event, onClose }) => {
return (
<div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
<div className="bg-white rounded-3xl max-w-md w-full">
<div className="p-6">
<div className="flex justify-between items-start mb-6">
<div>
<span className="text-3xl mr-3">{event.emoji || 'üíï'}</span>
<h2 className="text-2xl font-bold text-gray-800 inline">{event.title}</h2>
</div>
<button onClick={onClose} className="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
</div>

{event.date && (
<div className="mb-4 p-3 bg-pink-50 rounded-2xl text-center">
<p className="text-pink-700 font-medium">
{new Date(event.date).toLocaleDateString('ru-RU', {
year: 'numeric',
month: 'long',
day: 'numeric'
})}
</p>
</div>
)}

{event.description && (
<div className="mb-6">
<h3 className="font-bold text-gray-800 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ</h3>
<p className="text-gray-600 leading-relaxed whitespace-pre-line">{event.description}</p>
</div>
)}

<div className="text-center">
<button
onClick={onClose}
className="gradient-button text-white px-6 py-3 rounded-2xl font-medium"
>
–ó–∞–∫—Ä—ã—Ç—å üíï
</button>
</div>
</div>
</div>
</div>
);
};
// ============================================
// –û–°–ù–û–í–ù–û–ô –†–ï–ù–î–ï–† –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
// ============================================
const App = () => {
  return <RomanticMobileApp />;
};

// –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
if (window.firebaseReady) {
  ReactDOM.createRoot(document.getElementById('root')).render(<App />);
} else {
  window.addEventListener('firebaseReady', () => {
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  });
};
</script>
</body>
</html>
